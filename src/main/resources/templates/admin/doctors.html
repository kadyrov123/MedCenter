<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.w3.org/1999/xhtml">

<head>
    <th:block th:insert="admin/fragments/layout :: head"></th:block>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
</head>

<body>
<!-- Sidenav -->
<nav class="sidenav navbar navbar-vertical  fixed-left  navbar-expand-xs navbar-light bg-white" id="sidenav-main">
    <div class="scrollbar-inner">
        <!-- Brand -->
        <div class="sidenav-header  align-items-center">
            <a class="navbar-brand" href="javascript:void(0)">
                <img src="../assets/img/brand/blue.png" class="navbar-brand-img" alt="...">
            </a>
        </div>
        <div class="navbar-inner">
            <!-- Collapse -->
            <div class="collapse navbar-collapse" id="sidenav-collapse-main">
                <!-- Nav items -->
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <a class="nav-link active" href="dashboard.html">
                            <i class="ni ni-tv-2 text-primary"></i>
                            <span class="nav-link-text">Dashboard</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="icons.html">
                            <i class="ni ni-planet text-orange"></i>
                            <span class="nav-link-text">Icons</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="map.html">
                            <i class="ni ni-pin-3 text-primary"></i>
                            <span class="nav-link-text">Google</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="profile.html">
                            <i class="ni ni-single-02 text-yellow"></i>
                            <span class="nav-link-text">Profile</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="tables.html">
                            <i class="ni ni-bullet-list-67 text-default"></i>
                            <span class="nav-link-text">Tables</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="login.html">
                            <i class="ni ni-key-25 text-info"></i>
                            <span class="nav-link-text">Login</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="register.html">
                            <i class="ni ni-circle-08 text-pink"></i>
                            <span class="nav-link-text">Register</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="upgrade.html">
                            <i class="ni ni-send text-dark"></i>
                            <span class="nav-link-text">Upgrade</span>
                        </a>
                    </li>
                </ul>
                <!-- Divider -->
                <hr class="my-3">
                <!-- Heading -->
                <h6 class="navbar-heading p-0 text-muted">
                    <span class="docs-normal">Documentation</span>
                </h6>
                <!-- Navigation -->
                <ul class="navbar-nav mb-md-3">
                    <li class="nav-item">
                        <a class="nav-link" href="https://demos.creative-tim.com/argon-dashboard/docs/getting-started/overview.html" target="_blank">
                            <i class="ni ni-spaceship"></i>
                            <span class="nav-link-text">Getting started</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="https://demos.creative-tim.com/argon-dashboard/docs/foundation/colors.html" target="_blank">
                            <i class="ni ni-palette"></i>
                            <span class="nav-link-text">Foundation</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="https://demos.creative-tim.com/argon-dashboard/docs/components/alerts.html" target="_blank">
                            <i class="ni ni-ui-04"></i>
                            <span class="nav-link-text">Components</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="https://demos.creative-tim.com/argon-dashboard/docs/plugins/charts.html" target="_blank">
                            <i class="ni ni-chart-pie-35"></i>
                            <span class="nav-link-text">Plugins</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active active-pro" href="upgrade.html">
                            <i class="ni ni-send text-dark"></i>
                            <span class="nav-link-text">Upgrade to PRO</span>
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</nav>
<!-- Main content -->
<div class="main-content" id="panel">
    <!-- Topnav -->
    <nav class="navbar navbar-top navbar-expand navbar-dark bg-primary border-bottom">
        <div class="container-fluid">
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <!-- Search form -->

                <!-- Navbar links -->
                <ul class="navbar-nav align-items-center  ml-md-auto "></ul>
                <ul class="navbar-nav align-items-center  ml-auto ml-md-0 ">
                    <li class="nav-item dropdown">
                        <a class="nav-link pr-0" href="#" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            <div class="media align-items-center">
                      <span class="avatar avatar-sm rounded-circle">
                        <img alt="Image placeholder" src="../assets/img/theme/team-4.jpg">
                      </span>
                                <div class="media-body  ml-2  d-none d-lg-block">
                                    <span class="mb-0 text-sm  font-weight-bold">John Snow</span>
                                </div>
                            </div>
                        </a>
                        <div class="dropdown-menu  dropdown-menu-right ">
                            <div class="dropdown-header noti-title">
                                <h6 class="text-overflow m-0"></h6>
                            </div>
                            <a sec:authorize="hasRole('ROLE_ADMIN')" th:href="@{/admin/profile}" class="dropdown-item">
                                <i class="ni ni-single-02"></i>
                                <span>Мой профиль</span>
                            </a>
                            <a sec:authorize="hasRole('ROLE_DOCTOR')" th:href="@{/doctor/profile}" class="dropdown-item">
                                <i class="ni ni-single-02"></i>
                                <span>Мой профиль</span>
                            </a>
                            <a sec:authorize="hasRole('ROLE_REGISTRATOR')" th:href="@{/registrator/profile}" class="dropdown-item">
                                <i class="ni ni-single-02"></i>
                                <span>Мой профиль</span>
                            </a>
                            <a href="#!" class="dropdown-item">
                                <i class="ni ni-settings-gear-65"></i>
                                <span>Settings</span>
                            </a>

                            <div class="dropdown-divider"></div>
                            <a th:href="@{/logout}" class="dropdown-item">
                                <i class="ni ni-user-run"></i>
                                <span>Logout</span>
                            </a>
                        </div>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
    <!-- Header -->
    <!-- Header -->


<!-- ================================================================== Main Plane =========================================================================================-->
    <div>
        <div class="container-fluid mt--6" style="margin-top: 1.5rem !important;">
        <div class="row">
            <div class="col">
                <div class="card">
                    <!-- Card header -->
                    <div class="card-header border-success">
                        <h2 class="mb-0">Список Врачей</h2>
                    </div>
                    <!-- Light table -->
                    <div class="table-responsive">
                        <table class="table align-items-center table-flush table-hover">
                            <thead class="thead-light">
                            <tr>
                                <th scope="col" class="sort" data-sort="name">ФИО</th>
                                <th scope="col" class="sort" data-sort="budget">Начало работы</th>
                                <th scope="col" class="sort" data-sort="status">Конец работы</th>
                                <th scope="col" class="sort" data-sort="status">Интервал</th>
                                <th scope="col"></th>
                            </tr>
                            </thead>
                            <tbody class="list">
                                <tr th:each="doctor : ${doctors}"  th:data-doctorid="${doctor.id}">

                                        <th class='my-clickable-row' th:data-doctorid="${doctor.id}" scope="row">
                                           <p>[[${doctor.usersByDoctorId.name +' '+doctor.usersByDoctorId.surname}]]</p>
                                        </th>
                                        <td class='my-clickable-row' th:data-doctorid="${doctor.id}" >
                                            [[${doctor.startTime}]]
                                        </td>
                                        <td class='my-clickable-row' th:data-doctorid="${doctor.id}" >
                                            [[${doctor.endTime}]]
                                        </td>
                                        <td class='my-clickable-row' th:data-doctorid="${doctor.id}" >
                                            [[${doctor.intervalByIntervalId.interval}]]
                                        </td>


                                    <td class="text-right">
                                        <div class="dropdown">
                                            <form th:action="@{/admin/doctor/__${doctor.id}__/delete}" method="get" >
                                                <button class="btn btn-sm btn-icon-only text-light" type="submit" >
                                                    <i class="ni ni-fat-remove" style="font-size: 30px;"></i>
                                                </button>
                                            </form>

<!--                                            <a class="btn btn-sm btn-icon-only text-light" th:href="@{/doctor/__${doctor.id}__/delete}" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">-->
<!--                                                <i class="ni ni-fat-remove" style="font-size: 30px;"></i>-->
<!--                                            </a>-->
    <!--                                        <div class="dropdown-menu dropdown-menu-right dropdown-menu-arrow">-->
    <!--                                            <a class="dropdown-item" href="#">Action</a>-->
    <!--                                            <a class="dropdown-item" href="#">Another action</a>-->
    <!--                                            <a class="dropdown-item" href="#">Something else here</a>-->
    <!--                                        </div>-->
                                        </div>
                                    </td>
                                </tr>

                            </tbody>
                        </table>
                    </div>
                    <!-- Card footer -->
                    <div class="card-footer py-4">
                        <nav aria-label="...">
                            <ul class="pagination justify-content-end mb-0">
                                <li class="page-item disabled">
                                    <a class="page-link" href="#" tabindex="-1">
                                        <i class="fas fa-angle-left"></i>
                                        <span class="sr-only">Previous</span>
                                    </a>
                                </li>
                                <li class="page-item active">
                                    <a class="page-link" href="#">1</a>
                                </li>
                                <li class="page-item">
                                    <a class="page-link" href="#">2 <span class="sr-only">(current)</span></a>
                                </li>
                                <li class="page-item"><a class="page-link" href="#">3</a></li>
                                <li class="page-item">
                                    <a class="page-link" href="#">
                                        <i class="fas fa-angle-right"></i>
                                        <span class="sr-only">Next</span>
                                    </a>
                                </li>
                            </ul>
                        </nav>
                    </div>
                </div>
            </div>
        </div>
        </div>

        <div class="container-fluid mt--6" style="margin-top: 1.5rem !important;">
            <div class="row">
                <div class="col">
                    <div class="card">
                        <!-- Card header -->
                        <div class="card-header border-success">
                            <h2 class="mb-0">Добавить врача</h2>
                        </div>
                        <!-- Light table -->
                        <div class="card-body">
                            <form th:action="@{/admin/save/doctor}" method="post" th:object="${newDoctor}">
                                <div class="form-group">
                                    <label for="name" class="form-control-label">Имя</label>
                                    <input class="form-control" type="text" placeholder="John" id="name" th:field="*{firstName}">
                                </div>
                                <div class="form-group">
                                    <label for="surname" class="form-control-label">Фамилия</label>
                                    <input class="form-control" type="text" placeholder="Snow" id="surname" th:field="*{lastName}">
                                </div>
                                <div class="form-group">
                                    <label for="surname" class="form-control-label">Тип врача</label>
                                    <select type="text" class="form-control" id="doctorType" name="doctorTypeId"  >
                                        <option th:each="type : ${doctorTypes}" th:text="${type.type}" th:value="${type.id}" ></option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="username" class="form-control-label">Имя ползователя</label>
                                    <input class="form-control" type="text" value="John Snow" id="username" th:field="*{username}">
                                </div>
                                <div class="form-group">
                                    <label for="example-password-input" class="form-control-label">Пароль</label>
                                    <input class="form-control" type="password" id="example-password-input" th:field="*{password}">
                                </div>
                                <div class="form-group">
                                    <label for="example-confirm-password-input" class="form-control-label">Повторите пароль</label>
                                    <input class="form-control" type="password" id="example-confirm-password-input" th:field="*{confirmPassword}">
                                </div>

                                <input class="btn btn-success" type="submit" value="Добавить">

                            </form>
                        </div>

                    </div>
                </div>
            </div>
        </div>

    </div>



</div>


<script>
    $(document).ready(function(){
        $('.my-clickable-row').on("click" , function () {
            var doctorId = $(this).attr("data-doctorid");
            window.location = "/admin/doctor/" +doctorId + "/profile";
        });

    });
</script>


<!-- Argon Scripts -->
<!-- Core -->
<script th:src="@{/assets/vendor/jquery/dist/jquery.min.js}"></script>
<script th:src="@{/assets/vendor/bootstrap/dist/js/bootstrap.bundle.min.js}"></script>
<script th:src="@{/assets/vendor/js-cookie/js.cookie.js}"></script>
<script th:src="@{/assets/vendor/jquery.scrollbar/jquery.scrollbar.min.js}"></script>
<script th:src="@{/assets/vendor/jquery-scroll-lock/dist/jquery-scrollLock.min.js}"></script>
<!-- Optional JS -->
<script th:src="@{/assets/vendor/chart.js/dist/Chart.min.js}"></script>
<script th:src="@{/assets/vendor/chart.js/dist/Chart.extension.js}"></script>
<!-- Argon JS -->
<script th:src="@{/assets/js/argon.js?v=1.2.0}"></script>

</body>

</html>